# 多指数定量结构公式分析系统

这是一个基于Streamlit构建的金融指标分析系统，用于分析多个指数的MACD指标和定量结构公式。

## 功能特点

- 📊 **多指数支持**: 支持上证指数、深证成指、创业板指、沪深300、中证500、中证1000、中证2000、中证1000ETF等8个主要指数
- 🎛️ **简化设置**: 提供分析周期和图表样式的简单选择
- 📈 **实时数据**: 使用akshare获取实时股票数据
- 🎨 **美观界面**: 现代化的Web界面，支持响应式布局
- 📋 **信号分析**: 显示买入卖出信号、背离信号等关键指标
- 💾 **图表保存**: 支持将分析图表保存为PNG格式

## 安装和运行

### 方法一：使用批处理文件（推荐）

1. 双击运行 `run_streamlit.bat` 文件
2. 等待依赖包安装完成
3. 浏览器会自动打开应用界面

### 方法二：手动运行

1. 安装依赖包：
```bash
pip install -r requirements.txt
```

2. 启动应用：
```bash
streamlit run streamlit_app.py
```

3. 在浏览器中访问：`http://localhost:8501`

**注意**: Streamlit应用启动后会自动在浏览器中打开，如果没有自动打开，请手动访问上述网址。应用运行期间，你可以随时通过这个网址访问系统。

## 使用说明

### 系统设置（侧边栏）

- **分析周期**: 选择要分析的数据周期（最近30天、60天、90天或全部数据）
- **图表样式**: 选择图表显示样式（标准样式、暗色主题、简洁样式）

### 主界面操作

1. **选择指数**: 从下拉菜单中选择要分析的指数
2. **点击计算**: 点击"计算指标"按钮开始分析
3. **查看结果**: 
   - 上方显示价格走势图
   - 下方显示MACD指标图
   - 关键指标显示当前DIF、DEA、MACD和收盘价
   - 信号分析显示最近的买入卖出信号
   - 详细数据表格显示计算结果
4. **下载数据**: 支持下载CSV格式的完整数据
5. **保存图表**: 点击"保存分析图表"按钮将图表保存为PNG文件

## 支持的指数

| 指数名称 | 代码 | 说明 |
|---------|------|------|
| 上证指数 | sh000001 | 上海证券交易所综合指数 |
| 深证成指 | sz399001 | 深圳证券交易所成份股指数 |
| 创业板指 | sz399006 | 创业板指数 |
| 沪深300 | sh000300 | 沪深300指数 |
| 上证50 | sh000016 | 上证50指数 |
| 中证500 | sh000905 | 中证500指数 |
| 中证1000 | sh000852 | 中证1000指数 |
| 中证2000 | sh000680 | 中证2000指数 |
| 中证1000ETF | sh000985 | 中证1000ETF |

## 技术架构

- **前端框架**: Streamlit
- **数据处理**: Pandas, NumPy
- **数据源**: akshare (股票数据API)
- **图表绘制**: Matplotlib
- **文件格式**: Excel, PNG

## 网络访问说明

### 本地访问
- 应用启动后，默认访问地址：`http://localhost:8501`
- 应用会自动在默认浏览器中打开
- 如果浏览器没有自动打开，请手动复制上述地址到浏览器

### 局域网访问
如果你想让同一网络下的其他设备访问，可以：
1. 找到你的本机IP地址（Windows: `ipconfig`，Mac/Linux: `ifconfig`）
2. 其他设备访问：`http://你的IP地址:8501`

### 公网访问（推荐）
推荐使用Streamlit Cloud获得公网访问地址：

1. **Streamlit Cloud部署**（推荐）：
   - 将代码上传到GitHub
   - 访问 https://share.streamlit.io/
   - 部署后获得类似 `https://your-app-name.streamlit.app/` 的地址
   - 详细步骤请查看：`部署到Streamlit_Cloud.md`

2. **ngrok**（临时方案）：
   ```bash
   # 安装ngrok后运行
   ngrok http 8501
   ```

## 注意事项

1. 确保网络连接正常，以便获取实时股票数据
2. 首次运行可能需要较长时间来下载依赖包
3. 图表保存功能会在当前目录生成PNG文件
4. 建议使用Chrome或Firefox浏览器获得最佳体验
5. 应用运行期间，可以随时通过网址访问，无需重新启动

## 故障排除

### 常见问题

1. **依赖包安装失败**
   - 确保Python版本 >= 3.7
   - 尝试使用国内镜像源：`pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/`

2. **数据获取失败**
   - 检查网络连接
   - 确认股票代码格式正确
   - 尝试重新运行应用

3. **图表显示异常**
   - 确保matplotlib正确安装
   - 检查中文字体设置

## 更新日志

- v1.0.0: 初始版本，支持基本的MACD指标分析
- 支持多指数分析
- 添加参数自定义功能
- 优化用户界面

## 联系方式

如有问题或建议，请通过以下方式联系：
- 邮箱: [your-email@example.com]
- GitHub: [your-github-repo] 